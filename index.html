<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
  <title>Tasbih Reward</title>
  <style>
    /* Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¼ĞµĞ½Ñ Ğ¸ Ğ±Ğ¾ĞºĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ */
    .menu-btn {
      position: fixed;
      top: 90px;
      left: 20px;
      font-size: 20px;
      cursor: pointer;
      z-index: 1001;
      color: white;
      text-shadow: 0 0 3px rgba(0,0,0,0.5);
    }

    .sidebar {
      position: fixed;
      left: -60%;
      top: 80px;
      width: 80%;
      height: 80%;
      background: rgba(10, 30, 40, .99);
      box-shadow: 1px 0 8px rgba(255,255,255,0.99);
      transition: 0.3s;
      z-index: 1002;
      color: white;
      display: flex;
      flex-direction: column;
    }
    .sidebar.active {
      left: 0;
    }

#user-container {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #007bff, #6610f2);
    color: white;
    padding: 5px 10px;
    border-radius: 10px;
    font-size: 15px;
    font-weight: bold;
    margin: 10px auto;
    width: 80%;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

    /* Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ ÑĞ¿Ğ¸ÑĞºĞ° Ğ¼ĞµĞ½Ñ Ğ¸ Ñ€ÑĞ´Ğ° ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº */
    .menu-items {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .menu-items li a {
      display: block;
      padding: 5px 10px;
      text-decoration: none;
      color: #fff;
      font-size: 15px;
    }

    .menu-buttons-row {
      display: flex;
      justify-content: space-around;
      margin: 10px 0;
    }

    .menu-buttons-row button {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #fff;
    }

    /* Ğ‘Ğ»Ğ¾Ğº ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ */
    .stats-container {
      padding: 1px 10px;
      border-top: 1px solid #102351;
      background: rgba(0,0,0,0.2);
    }

    .stat-item {
      margin: 10px 0;
    }

    .stat-progress {
      height: 8px;
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
      margin: 5px 0;
      overflow: hidden;
    }

    .stat-progress-bar {
      height: 100%;
      background: #4CAF50;
      width: 0%;
      transition: width 0.3s ease;
    }

    .stat-label {
      font-size: 13px;
      color: #aaa;
      margin-bottom: 3px;
    }

    .stat-value {
      font-size: 15px;
      font-weight: bold;
    }

.menu-footer {
    text-align: center;
    font-size: 10px;
    color: #888;
    padding: 5px;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    border-top: 1px solid #ddd;
}
.menu-footer a {
    color: #007bff;
    text-decoration: none;
}
.menu-footer a:hover {
    text-decoration: underline;
}

    /* ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ Ñ‚ĞµĞ»Ğ° */
    body {
      font-family: 'Arial', sans-serif;
      background-image: url('2.jpg');
      background-size: cover;
      background-position: center;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
    }

    .top-link {
      position: fixed;
      top: 50px;
      right: 90px;
      color: #9900cc;
      text-decoration: none;
      font-size: 14px;
      background: rgba(0,0,0,0.2);
      padding: 8px 8px;
      border-radius: 10px;
      font-weight: bold;
      z-index: 1000;
    }
    .top-link:hover {
      background: rgba(0,0,0,0.5);
    }

    .level-container {
      width: 40%;
      margin-bottom: 10px;
      margin-left: 30px;
      margin-right: auto;
    }

    .level-bar {
      height: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 9px;
      position: relative;
      overflow: hidden;
    }

    .level-progress {
      height: 100%;
      background: #66ffCC;
      width: 0%;
      transition: width 0.3s ease;
    }

    .level-text {
      position: absolute;
      top: 40%;
      left: 40%;
      transform: translate(-40%, -40%);
      font-weight: bold;
      color: #aaa;
      font-size: 13px;
    }

    .main-progress-container {
      width: 85%;
      margin-bottom: 130px;
      transition: margin 0.3s;
    }

    .main-progress-bar {
      height: 50px;
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      position: relative;
      overflow: hidden;
    }

    .main-progress {
      height: 100%;
      background: #4CAF50;
      width: 0%;
      transition: width 0.3s ease;
    }

    .main-counter {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 30px;
      font-weight: bold;
    }

    .zikr-container {
      margin-bottom: 90px;
    }

    .zikr-button {
      font-size: 180px;
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
      top: 100px;
    }

    .zikr-text {
      position: absolute;
      font-size: 15px;
      color: #4CAF50;
      font-weight: bold;
      text-shadow: 0 0 5px rgba(76,175,80,0.5);
      left: 50%;
      transform: translateX(-50%);
      transition: font-size 0.2s;
      width: 130%;
      max-width: 540px;
      text-align: center;
      white-space: normal;
      word-wrap: break-word;
      bottom: 240px;
      padding: 3px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 5px;
    }

    /* Ğ¡ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚ */
    .hidden {
      display: none;
    }

    .zikr-button:active {
      transform: scale(1.1);
    }
    .zikr-button:active .zikr-text {
      font-size: 17px;
    }

    .reset-container {
      position: fixed;
      left: 20px;
      bottom: 5%;
    }

    #reset {
      border: none;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      font-size: 40px;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    #reset:hover {
      background: #c82333;
    }

    .total-counter {
      position: fixed;
      bottom: 5%;
      right: 20px;
      background: rgba(0,0,0,0.4);
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 14px;
    }

    .news-text {
      padding: 5px;
      color: #aaa;
      font-size: 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 5px;
      margin-top: 10px;
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 80%;
        left: -80%;
      }
      .sidebar.active ~ .main-progress-container {
        margin-left: 70%;
      }
    }
  </style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¼ĞµĞ½Ñ -->
  <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
  
  <!-- Ğ‘Ğ¾ĞºĞ¾Ğ²Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ¼ĞµĞ½Ñ -->
  <div class="sidebar" id="sidebar">
<div id="user-container">
    <span id="user-name"></span>
</div>
    <!-- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ "Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ" -->
    <ul class="menu-items">
      <li><a href="https://t.me/Tasbih_ru/13" id="menu-home">ğŸ“± Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ</a></li>
      <li><a href="https://t.me/Tasbih_ru/42" id="menu-reward">ğŸ ĞĞ°Ğ³Ñ€Ğ°Ğ´Ñ‹</a></li>
      <li><a href="https://t.me/Tasbih_ru/44" id="menu-help">ğŸ†˜ ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ</a></li>
    </ul>
<!-- Ğ ÑĞ´ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº: ÑĞ±Ñ€Ğ¾Ñ, Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ°, ÑĞ¼ĞµĞ½Ğ° ÑĞ·Ñ‹ĞºĞ° Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ·Ğ¸ĞºÑ€ --> 
        <div class="menu-buttons-row">
      <button id="reset-btn" onclick="resetTotalCount()">ğŸ”„</button>
      <button id="custom-zikr-btn" onclick="customZikr()">âœï¸</button>
      <button id="toggle-text-btn" onclick="toggleZikrText()">ğŸ‘ï¸â€ğŸ—¨ï¸</button>
      <button id="lang-toggle-btn" onclick="toggleLanguage()">RU</button>
    </div> 
    <!-- Ğ‘Ğ»Ğ¾Ğº ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ -->
    <div class="stats-container">
      <!-- Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½Ğ¸Ğ¹ ÑÑ‡ĞµÑ‚ -->
      <div class="stat-item">
        <div class="stat-label" id="daily-label">ğŸ“… Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ (Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ñ†ĞµĞ»ÑŒ ğŸ¯ 900)</div>
        <div class="stat-value" id="stat-daily">0</div>
        <div class="stat-progress">
          <div class="stat-progress-bar" id="daily-progress"></div>
        </div>
      </div>
      <!-- Ğ’Ñ‡ĞµÑ€Ğ°ÑˆĞ½Ğ¸Ğ¹ ÑÑ‡ĞµÑ‚ -->
      <div class="stat-item">
        <div class="stat-label" id="yesterday-label">ğŸ—“ï¸ Ğ’Ñ‡ĞµÑ€Ğ°ÑˆĞ½Ğ¸Ğ¹ ÑÑ‡ĞµÑ‚</div>
        <div class="stat-value" id="stat-yesterday">0</div>
        <div class="stat-progress">
          <div class="stat-progress-bar" id="yesterday-progress"></div>
        </div>
      </div>
      <!-- ĞĞ±Ñ‰Ğ¸Ğ¹ ÑÑ‡ĞµÑ‚ -->
      <div class="stat-item">
        <div class="stat-label" id="total-label">ğŸ“¿ Ğ’ÑĞµĞ³Ğ¾ (Ğ•Ğ¶ĞµĞ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğ¹ Ñ†ĞµĞ»ÑŒ ğŸ¯50K)</div>
        <div class="stat-value" id="stat-total">0</div>
        <div class="stat-progress">
          <div class="stat-progress-bar" id="total-progress"></div>
        </div>
      </div>
      <!-- ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ -->
      <div class="stat-item">
        <div class="stat-label" id="last-active-label">â± ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ</div>
        <div class="stat-value" id="stat-last-active">-</div>
      </div>
      <!-- ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ²Ñ…Ğ¾Ğ´ -->
      <div class="stat-item">
        <div class="stat-label" id="first-date-label">ğŸ“… ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ²Ñ…Ğ¾Ğ´</div>
        <div class="stat-value" id="stat-first-date">-</div>
      </div>
      <!-- ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸ -->
      <div class="stat-item">
        <div class="news-text" id="news-text">ğŸ•‹ ĞŸÑ€Ğ¾Ñ€Ğ¾Ğº (ï·º) ÑĞºĞ°Ğ·Ğ°Ğ»:<br>Â«Ğ”ÑƒÑˆĞ¸ Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½Ñ‹ Ğ²Ğ¾Ğ¸Ğ½Ğ°Ğ¼! Ğ¢Ğµ Ğ¸Ğ· Ğ½Ğ¸Ñ…, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ÑƒĞ·Ğ½Ğ°ÑÑ‚ Ğ´Ñ€ÑƒĞ³ Ğ´Ñ€ÑƒĞ³Ğ°, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑÑ‚ÑÑ, Ğ° Ñ‚Ğµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ´Ñ€ÑƒĞ³ Ğ´Ñ€ÑƒĞ³Ğ° Ğ½Ğµ ÑƒĞ·Ğ½Ğ°ÑÑ‚, Ñ€Ğ°ÑÑ…Ğ¾Ğ´ÑÑ‚ÑÑÂ»<br>ğŸ“Œ Ğ¥Ğ°Ğ´Ğ¸Ñ Ğ¾Ñ‚ ĞĞ¹ÑˆĞ¸<br>ğŸ“– Ğ¡Ğ°Ñ…Ğ¸Ñ… Ğ°Ğ»ÑŒ-Ğ‘ÑƒÑ…Ğ°Ñ€Ğ¸, ĞœÑƒÑĞ»Ğ¸Ğ¼ </div>
      </div>
    </div>
<!-- Ğ‘Ğ»Ğ¾Ğº Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€ÑĞºĞ¸Ğ¼Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ°Ğ¼Ğ¸ -->
<div class="menu-footer">
    Â©ï¸ Telegram WebApp: Tasbih ğŸ¤– <br>
Created in 28.02.2025 for <a href="https://t.me/Tasbih_rubot">@Tasbih_rubot</a>
</div>
  </div>

  <!-- ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ -->
  <a href="https://t.me/Tasbih_ru" class="top-link" target="_blank">â˜ªï¸ Tasbih Reward</a>

  <div class="level-container">
    <div class="level-bar">
      <div class="level-progress"></div>
      <div class="level-text" id="level-text">Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ <span id="level">1</span> Ğ¸Ğ· 5</div>
    </div>
  </div>

  <div class="main-progress-container">
    <div class="main-progress-bar">
      <div class="main-progress"></div>
      <div class="main-counter"><span id="count">0</span>/33</div>
    </div>
  </div>

  <!-- ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ·Ğ¸ĞºÑ€Ğ°: Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸ ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ²ĞµÑÑŒ Ğ±Ğ»Ğ¾Ğº -->
  <div class="zikr-container" id="zikr-container">
    <div class="zikr-button">
      ğŸ“¿
      <div class="zikr-text" id="zikr-text">Ğ¡ÑƒĞ±Ñ…Ğ°Ğ½Ğ°Ğ»Ğ»Ğ°Ñ… (ĞŸÑ€ĞµÑ‡Ğ¸ÑÑ‚ ĞĞ»Ğ»Ğ°Ñ…)</div>
    </div>
  </div>

  <div class="reset-container">
    <button id="reset">â­•</button>
  </div>

  <!-- Ğ¡Ñ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ·Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ -->
  <div class="total-counter">Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ: <span id="today-count">0</span></div>

  <script>
    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ¸ĞºÑ€Ğ¾Ğ² Ñ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ°Ğ¼Ğ¸
    const SETTINGS = {
      zikrList: [
        { ru: "Ğ¡ÑƒĞ±Ñ…Ğ°Ğ½Ğ°Ğ»Ğ»Ğ°Ñ…<br>(ĞŸÑ€ĞµÑ‡Ğ¸ÑÑ‚ ĞĞ»Ğ»Ğ°Ñ…)", en: "Subá¸¥ÄnallÄh<br>(Glory be to Allah)", ar: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù" },
        { ru: "ĞĞ»ÑŒÑ…Ğ°Ğ¼Ğ´ÑƒĞ»Ğ¸Ğ»Ğ»ÑÑ…<br>(Ğ¥Ğ²Ğ°Ğ»Ğ° ĞĞ»Ğ»Ğ°Ñ…Ñƒ)", en: "Al-á¸¥amdu lillÄh<br>(Praise be to Allah)", ar: "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡" },
        { ru: "ĞĞ»Ğ»Ğ°Ñ…Ñƒ ĞĞºĞ±Ğ°Ñ€<br>(ĞĞ»Ğ»Ğ°Ñ… Ğ’ĞµĞ»Ğ¸Ğº)", en: "AllÄhu Akbar<br>(Allah is the Greatest)", ar: "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±" },
        { ru: "Ğ›Ñ Ğ¸Ğ»ÑÑ…Ğ° Ğ¸Ğ»Ğ»Ñ-Ğ›Ğ»Ğ°Ñ…<br>(ĞĞµÑ‚ Ğ±Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ°, ĞºÑ€Ğ¾Ğ¼Ğµ ĞĞ»Ğ»Ğ°Ñ…Ğ°)", en: "LÄ ilÄha illa-llÄh<br>(There is no deity except Allah)", ar: "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡" },
        { ru: "ĞÑÑ‚Ğ°Ğ³Ñ„Ğ¸Ñ€ÑƒĞ»Ğ»Ğ°Ñ…<br>(ĞŸÑ€Ğ¾ÑˆÑƒ Ğ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ¸Ñ Ñƒ ĞĞ»Ğ»Ğ°Ñ…Ğ°)", en: "AstaghfirullÄh<br>(I seek forgiveness from Allah)", ar: "Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù" },
        { ru: "Ğ¡ÑƒĞ±Ñ…Ğ°Ğ½Ğ°Ğ»Ğ»Ğ°Ñ…Ğ¸ Ğ²Ğ° Ğ±Ğ¸Ñ…Ğ°Ğ¼Ğ´Ğ¸-Ñ…Ğ¸<br>(ĞŸÑ€ĞµÑ‡Ğ¸ÑÑ‚ ĞĞ»Ğ»Ğ°Ñ… Ğ¸ Ğ•Ğ¼Ñƒ Ñ…Ğ²Ğ°Ğ»Ğ°)", en: "Subá¸¥ÄnallÄhi wa biá¸¥amdihÄ«<br>(Glory be to Allah and all praise is due to Him)", ar: "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡" },
        { ru: "Ğ¡ÑƒĞ±Ñ…Ğ°Ğ½Ğ°Ğ»Ğ»Ğ°Ñ…Ğ¸ Ğ°Ğ»ÑŒ-ĞĞ·Ñ‹Ğ¼<br>(ĞŸÑ€ĞµÑ‡Ğ¸ÑÑ‚ ĞĞ»Ğ»Ğ°Ñ… Ğ’ĞµĞ»Ğ¸ĞºĞ¸Ğ¹)", en: "Subá¸¥ÄnallÄhi al-â€˜Aáº“Ä«m<br>(Glory be to Allah, the Most Great)", ar: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù" },
        { ru: "Ğ›Ğ° Ğ¸Ğ»Ğ°ha Ğ¸Ğ»Ğ»Ğ°-Ğ»Ğ›Ğ¾hÑƒ Ğ²Ğ°hĞ´Ğ°hÑƒ Ğ»Ğ° ÑˆĞ°Ñ€Ğ¸ĞºĞ° Ğ»Ğ°h. Ğ›Ğ°hÑƒĞ» Ğ¼ÑƒĞ»ĞºÑƒ Ğ²Ğ° Ğ»Ğ°hÑƒ-Ğ» haĞ¼Ğ´Ğ° Ğ²Ğ° hÑƒĞ²Ğ° ÑŠĞ°Ğ»Ğ° ĞºÑƒĞ»Ğ»Ğ¸ ÑˆĞ°Ğ¹Ğ¸Ğ½ QĞ°Ğ´Ğ¸Ñ€",
          en: "LÄ ilÄha illa-llÄhu waá¸¥dahu lÄ sharÄ«ka lah, lahu-l-mulku wa lahu-l-á¸¥amdu, wa huwa â€˜alÄ kulli shayâ€™in qadÄ«r<br>(There is no deity except Allah, alone, without any partner. To Him belongs sovereignty and to Him belongs all praise, and He has power over all things)",
          ar: "Ù„ÙØ§ Ø¥ÙÙ„Ù°Ù‡Ù Ø¥ÙÙ„Ù‘ÙØ§ Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡ÙØŒ Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ " }
      ],
      levels: [
        { required: 3500, level: 1 },
        { required: 7000, level: 2 },
        { required: 14000, level: 3 },
        { required: 30000, level: 4 },
        { required: 50000, level: 5 }
      ]
    };

    const translations = {
      ru: {
        title: "ĞĞ°Ğ³Ñ€Ğ°Ğ´Ğ° Ğ¢Ğ°ÑĞ±Ğ¸Ñ…Ğ°",
        menuHome: "ğŸ“± Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ",
        menuReward: "ğŸ ĞĞ°Ğ³Ñ€Ğ°Ğ´Ñ‹", 
        menuHelp: "ğŸ†˜ ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ", 
        menuResetCount: "ğŸ”„",
        menuToggleTextVisible: "ğŸ‘ï¸â€ğŸ—¨ï¸",
        menuToggleTextHidden: "ğŸ™ˆ",
        menuChangeLang: "RU",
        statDaily: "ğŸ“… Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ (Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ñ†ĞµĞ»ÑŒ ğŸ¯ 900)",
        statYesterday: "ğŸ—“ï¸ Ğ’Ñ‡ĞµÑ€Ğ°ÑˆĞ½Ğ¸Ğ¹ ÑÑ‡ĞµÑ‚",
        statTotal: "ğŸ“¿ Ğ’ÑĞµĞ³Ğ¾ (Ğ•Ğ¶ĞµĞ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğ¹ Ñ†ĞµĞ»ÑŒ ğŸ¯50K)",
        statLastActive: "â± ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ",
        statFirstVisit: "ğŸ“… ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ²Ñ…Ğ¾Ğ´",
        statNews: "ğŸ•‹ ĞŸÑ€Ğ¾Ñ€Ğ¾Ğº (ï·º) ÑĞºĞ°Ğ·Ğ°Ğ»:<br>Â«Ğ”ÑƒÑˆĞ¸ Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½Ñ‹ Ğ²Ğ¾Ğ¸Ğ½Ğ°Ğ¼! Ğ¢Ğµ Ğ¸Ğ· Ğ½Ğ¸Ñ…, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ÑƒĞ·Ğ½Ğ°ÑÑ‚ Ğ´Ñ€ÑƒĞ³ Ğ´Ñ€ÑƒĞ³Ğ°, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑÑ‚ÑÑ, Ğ° Ñ‚Ğµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ´Ñ€ÑƒĞ³ Ğ´Ñ€ÑƒĞ³Ğ° Ğ½Ğµ ÑƒĞ·Ğ½Ğ°ÑÑ‚, Ñ€Ğ°ÑÑ…Ğ¾Ğ´ÑÑ‚ÑÑÂ»<br>ğŸ“Œ Ğ¥Ğ°Ğ´Ğ¸Ñ Ğ¾Ñ‚ ĞĞ¹ÑˆĞ¸<br>ğŸ“– Ğ¡Ğ°Ñ…Ğ¸Ñ… Ğ°Ğ»ÑŒ-Ğ‘ÑƒÑ…Ğ°Ñ€Ğ¸, ĞœÑƒÑĞ»Ğ¸Ğ¼",
        levelText: "Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ {level} Ğ¸Ğ· 5",
        dailyCounterLabel: "Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ: ",
        alertResetSuccess: "ĞĞ±Ñ‰Ğ¸Ğ¹ ÑÑ‡ĞµÑ‚ ÑĞ±Ñ€Ğ¾ÑˆĞµĞ½!",
        alertResetFailure: "Ğ”Ğ»Ñ ÑĞ±Ñ€Ğ¾ÑĞ° Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ±Ğ¾Ğ»ĞµĞµ 100000 Ğ·Ğ¸ĞºÑ€Ğ¾Ğ²!"
      },
      en: {
        title: "Tasbih Reward",
        menuHome: "ğŸ“± Home",
        menuReward: "ğŸ Rewards", 
        menuHelp: "ğŸ†˜ Help",  
        menuResetCount: "ğŸ”„",
        menuToggleTextVisible: "ğŸ‘ï¸ Hide text",
        menuToggleTextHidden: "ğŸ™ˆ Show text",
        menuChangeLang: "EN",
        statDaily: "ğŸ“… Today (Daily goal ğŸ¯ 900)",
        statYesterday: "ğŸ—“ï¸ Yesterday's count",
        statTotal: "ğŸ“¿ Total (Monthly goal ğŸ¯50K)",
        statLastActive: "â± Last activity",
        statFirstVisit: "ğŸ“… First visit",
        statNews: "Hadiths of the Prophet (PBUH) will be displayed here",
        levelText: "Level {level} of 5",
        dailyCounterLabel: "Today: ",
        alertResetSuccess: "Total count reset!",
        alertResetFailure: "Need more than 100000 zikr to reset!"
      },
      ar: {
        title: "Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„ØªØ³Ø¨ÙŠØ­",
        menuHome: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        menuReward: "ğŸ Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²", 
        menuHelp: "ğŸ†˜ ØªØ¹Ù„ÙŠÙ…Ø§Øª" ,  
        menuResetCount: "ğŸ”„",
        menuToggleTextVisible: "ğŸ‘ï¸ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Øµ",
        menuToggleTextHidden: "ğŸ™ˆ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Øµ",
        menuChangeLang: "AR",
        statDaily: "ğŸ“… Ø§Ù„ÙŠÙˆÙ… (Ø§Ù„Ù‡Ø¯Ù Ø§Ù„ÙŠÙˆÙ…ÙŠ ğŸ¯ 900)",
        statYesterday: "ğŸ—“ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ø¨Ø§Ø±Ø­Ø©",
        statTotal: "ğŸ“¿ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø´Ù‡Ø±ÙŠ ğŸ¯50K)",
        statLastActive: "â± Ø¢Ø®Ø± Ù†Ø´Ø§Ø·",
        statFirstVisit: "ğŸ“… Ø£ÙˆÙ„ Ø¯Ø®ÙˆÙ„",
        statNews: "Ø£Ø­Ø§Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨ÙŠ (ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù…) Ù‡Ù†Ø§",
        levelText: "Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {level} Ù…Ù† 5",
        dailyCounterLabel: "Ø§Ù„ÙŠÙˆÙ…: ",
        alertResetSuccess: "ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ!",
        alertResetFailure: "ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£ÙƒØ«Ø± Ù…Ù† 100000 Ù„Ù„ØªÙ…ÙƒÙ† Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†!"
      }
    };

    // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ
    let appData = JSON.parse(localStorage.getItem('tasbihData')) || {
      count: 0,
      totalCount: 0,
      currentZikrIndex: 0,
      firstVisitDate: new Date().toISOString(),
      dailyCount: 0,
      yesterdayCount: 0,
      lastVisitDate: new Date().toLocaleDateString(),
      lastActive: null,
      isZikrTextVisible: true,
      lang: "ru",
      customZikr: "",            // ĞĞ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ³Ğ¾ Ğ·Ğ¸ĞºÑ€Ğ°
      customZikrEnabled: false   // Ğ¤Ğ»Ğ°Ğ³, Ğ²ĞºĞ»ÑÑ‡ĞµĞ½ Ğ»Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ·Ğ¸ĞºÑ€
    };

    const tg = window.Telegram.WebApp;

    let touchStartX = 0;
    let touchStartY = 0;
    const SWIPE_THRESHOLD = 10;
    const ACTION_INTERVAL = 300;
    let lastActionTime = 0;

    tg.ready();
    tg.onEvent('auth', setUserName);
    tg.expand();
    updateStats();
    updateDisplays();
    updateLanguage();

    // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°/ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ±Ğ¾ĞºĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ
    function toggleMenu() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
      if (sidebar.classList.contains('active')) updateStats();
    }

function setUserName() {
    if (tg.initDataUnsafe?.user?.first_name) {
        document.getElementById('user-name').textContent = `ğŸŸ¢  ${tg.initDataUnsafe.user.first_name}`;
    } else {
        document.getElementById('user-name').textContent = "ğŸ‘¤â‰ï¸";
    }
}

// Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ¸Ğ¼Ñ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Telegram WebApp
tg.ready();
setUserName();
tg.onEvent('auth', setUserName);

    // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ·Ğ¸ĞºÑ€Ğ°: ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ½Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚ĞµĞºÑÑ‚, Ğ½Ğ¾ Ğ¸ Ğ²ĞµÑÑŒ Ğ±Ğ»Ğ¾Ğº Ñ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸ (ĞºĞ½Ğ¾Ğ¿ĞºĞ° ĞºĞ»Ğ¸ĞºĞ°)
    function toggleZikrText() {
      appData.isZikrTextVisible = !appData.isZikrTextVisible;
      // Ğ¡ĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼/Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ±Ğ»Ğ¾Ğº Ñ Ğ·Ğ¸ĞºÑ€Ğ¾Ğ¼ Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼
      document.getElementById('zikr-container').classList.toggle('hidden', !appData.isZikrTextVisible);
      updateToggleTextBtn();
      toggleMenu();
      saveData();
    }

    function updateToggleTextBtn() {
      const lang = appData.lang;
      const btn = document.getElementById('toggle-text-btn');
      if (btn) {
        btn.textContent = appData.isZikrTextVisible
          ? translations[lang].menuToggleTextVisible
          : translations[lang].menuToggleTextHidden;
      }
    }

    // Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ¾Ğ±Ñ‰ĞµĞ³Ğ¾ ÑÑ‡Ñ‘Ñ‚Ğ° Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼ Ğ¿ĞµÑ€ĞµĞ²ĞµĞ´Ñ‘Ğ½Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
    function resetTotalCount() {
      const lang = appData.lang;
      if (appData.totalCount > 100000) {
        appData.totalCount = 0;
        updateDisplays();
        saveData();
        alert(translations[lang].alertResetSuccess);
      } else {
        alert(translations[lang].alertResetFailure);
      }
      toggleMenu();
    }

    // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸/Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ¸ĞºÑ€Ğ°
    function customZikr() {
      if (appData.customZikrEnabled) {
        // Ğ•ÑĞ»Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ·Ğ¸ĞºÑ€ ÑƒĞ¶Ğµ Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½, ÑĞ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµĞ¼, Ñ…Ğ¾Ñ‡ĞµÑ‚ Ğ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ĞµĞ³Ğ¾ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ
        if (confirm("Ğ’Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ğ¹ Ğ·Ğ¸ĞºÑ€ Ğ¸ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ Ğ·Ğ¸ĞºÑ€Ñ‹?")) {
          appData.customZikrEnabled = false;
          appData.customZikr = "";
          updateDisplays();
          saveData();
        }
      } else {
        // Ğ•ÑĞ»Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ·Ğ¸ĞºÑ€ Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½, Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµĞ¼ ĞµĞ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´
        let customText = prompt("Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°ÑˆĞµ ÑĞ»Ğ¾Ğ²Ğ¾ Ğ·Ğ¸ĞºÑ€Ğ°:");
        if (customText && customText.trim() !== "") {
          appData.customZikr = customText.trim();
          appData.customZikrEnabled = true;
          updateDisplays();
          saveData();
        }
      }
    }

    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
    function updateStats() {
      const dailyProgress = (appData.dailyCount / 900) * 100;
      document.getElementById('daily-progress').style.width = `${Math.min(dailyProgress, 100)}%`;
      document.getElementById('stat-daily').textContent = appData.dailyCount;

      document.getElementById('stat-yesterday').textContent = appData.yesterdayCount;
      document.getElementById('yesterday-progress').style.width = `${Math.min((appData.yesterdayCount / 900) * 100, 100)}%`;

      document.getElementById('stat-total').textContent = appData.totalCount;
      document.getElementById('total-progress').style.width = `${Math.min((appData.totalCount / 50000) * 100, 100)}%`;

      document.getElementById('stat-first-date').textContent =
        new Date(appData.firstVisitDate).toLocaleDateString(appData.lang, {
          day: 'numeric',
          month: 'long',
          year: 'numeric'
        });

      document.getElementById('stat-last-active').textContent =
        new Date().toLocaleDateString(appData.lang, {
          day: 'numeric',
          month: 'long',
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });
    }

    // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    function saveData() {
      appData.lastActive = new Date().toISOString();
      localStorage.setItem('tasbihData', JSON.stringify(appData));
      updateStats();
    }

    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸ĞºĞ¾Ğ² Ğ¸ Ğ·Ğ¸ĞºÑ€Ğ° Ñ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¾Ğ¼
    function updateDisplays() {
      const today = new Date().toLocaleDateString();
      if (appData.lastVisitDate !== today) {
        appData.yesterdayCount = appData.dailyCount;
        appData.dailyCount = 0;
        appData.lastVisitDate = today;
      }

      document.getElementById('count').textContent = appData.count;
      document.getElementById('today-count').textContent = appData.dailyCount;
      // Ğ•ÑĞ»Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ·Ğ¸ĞºÑ€ Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ĞµĞ³Ğ¾, Ğ¸Ğ½Ğ°Ñ‡Ğµ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ğ·Ğ¸ĞºÑ€
      if (appData.customZikrEnabled && appData.customZikr) {
        document.getElementById('zikr-text').textContent = appData.customZikr;
      } else {
        document.getElementById('zikr-text').innerHTML =
          SETTINGS.zikrList[appData.currentZikrIndex][appData.lang];
      }

      document.querySelector('.main-progress').style.width = `${(appData.count / 33) * 100}%`;

      const levelProgress = calculateLevelProgress();
      document.querySelector('.level-progress').style.width = `${levelProgress}%`;
    }

    // Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ° ÑƒÑ€Ğ¾Ğ²Ğ½Ñ
    function calculateLevelProgress() {
      const currentLevel = SETTINGS.levels.find(l => appData.totalCount < l.required) || { level: 5 };
      document.getElementById('level').textContent = currentLevel.level;
      const prevLevel = SETTINGS.levels[currentLevel.level - 2] || { required: 0 };
      return ((appData.totalCount - prevLevel.required) / (currentLevel.required - prevLevel.required)) * 100 || 100;
    }

    // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ĞºĞ»Ğ¸ĞºĞ¾Ğ² (ÑƒÑ‡Ñ‘Ñ‚ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ğ° Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ÑĞ¼Ğ¸)
    function handleClick() {
      const now = Date.now();
      if (now - lastActionTime < ACTION_INTERVAL) return;
      lastActionTime = now;

      if (document.getElementById('sidebar').classList.contains('active')) {
        toggleMenu();
      }

      appData.count++;
      appData.totalCount++;
      appData.dailyCount++;

      if (appData.count === 33) {
        appData.count = 0;
        appData.currentZikrIndex = (appData.currentZikrIndex + 1) % SETTINGS.zikrList.length;
      }

      updateDisplays();
      updateStats();
      saveData();
    }

    // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ²Ğ°Ğ¹Ğ¿Ğ¾Ğ²
    function handleSwipe(e) {
      const touchEndX = e.changedTouches[0].clientX;
      const touchEndY = e.changedTouches[0].clientY;
      const deltaX = touchEndX - touchStartX;
      const deltaY = touchEndY - touchStartY;
      if (Math.abs(deltaX) > SWIPE_THRESHOLD || Math.abs(deltaY) > SWIPE_THRESHOLD) {
        handleClick();
      }
    }

    function handleTouchStart(e) {
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
    }

    // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ ÑĞ±Ñ€Ğ¾ÑĞ° (ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹, Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑĞ±Ñ€Ğ¾ÑĞ°)
    document.getElementById('reset').addEventListener('click', () => {
      if (appData.totalCount > 100) {
        appData.totalCount--;
      }
      appData.count = 0;
      appData.currentZikrIndex = 0;
      updateDisplays();
      saveData();
    });

    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ĞºĞ»Ğ¸ĞºĞ¾Ğ² Ğ¸ ÑĞ²Ğ°Ğ¹Ğ¿Ğ¾Ğ²
    document.addEventListener('click', (e) => {
      if (!e.target.closest('#reset') && !e.target.closest('.menu-btn')) {
        handleClick();
      }
    });
    document.addEventListener('touchstart', handleTouchStart);
    document.addEventListener('touchend', handleSwipe);

    // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ°
    function toggleLanguage() {
      const langs = ["ru", "en", "ar"];
      let currentIndex = langs.indexOf(appData.lang);
      currentIndex = (currentIndex + 1) % langs.length;
      appData.lang = langs[currentIndex];
      saveData();
      updateLanguage();
    }

    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ¼Ñƒ ÑĞ·Ñ‹ĞºÑƒ
    function updateLanguage() {
      const lang = appData.lang;
      document.title = translations[lang].title;
      document.getElementById('menu-home').textContent = translations[lang].menuHome;
      document.getElementById('menu-reward').textContent = translations[lang].menuReward;
      document.getElementById('menu-help').textContent = translations[lang].menuHelp;
      
      // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ñ€ÑĞ´Ğ°
      document.getElementById('reset-btn').textContent = translations[lang].menuResetCount;
      updateToggleTextBtn();
      document.getElementById('lang-toggle-btn').textContent = translations[lang].menuChangeLang;
      
      document.getElementById('daily-label').textContent = translations[lang].statDaily;
      document.getElementById('yesterday-label').textContent = translations[lang].statYesterday;
      document.getElementById('total-label').textContent = translations[lang].statTotal;
      document.getElementById('last-active-label').textContent = translations[lang].statLastActive;
      document.getElementById('first-date-label').textContent = translations[lang].statFirstVisit;
      document.getElementById('news-text').innerHTML = translations[lang].statNews;
      
      const totalCounter = document.querySelector('.total-counter');
      totalCounter.innerHTML = translations[lang].dailyCounterLabel + '<span id="today-count">' + appData.dailyCount + '</span>';
      
      // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ñ‚ĞµĞºÑÑ‚ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ
      const levelElem = document.getElementById('level').textContent;
      document.getElementById('level-text').innerHTML = translations[lang].levelText.replace("{level}", '<span id="level">' + levelElem + '</span>');
    }

    function init() {
      const today = new Date().toLocaleDateString();
      if (appData.lastVisitDate !== today) {
        appData.yesterdayCount = appData.dailyCount;
        appData.dailyCount = 0;
        appData.lastVisitDate = today;
        saveData();
      }
    }

    init();
  </script>
</body>
</html>
